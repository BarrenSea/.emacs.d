#+TITLE: Barrensea Emacs
#+AUTHOR: DonjuanPlatinum in Barrensea
#+DATE: 2024/6/22
#+STARTUP: overview
* key
** flycheck
| C-c C-c l | flycheck-list-errors | æ˜¾ç¤ºé”™è¯¯åˆ—è¡¨ |
** basic
| M . | xref-find-definitions | è·³è½¬åˆ°å¼•ç”¨çš„æºä»£ç å¤„ |
| M , | xref-go-back          | è·³å›å»             |
| M ? | xref-find-references  | åˆ—å‡ºæ‰€æœ‰çš„å¼•ç”¨          |
* init.el
:PROPERTIES:
:HEADER-ARGS: :tangle init.el
:END:
=init.el=

** å¯¼å…¥è·¯å¾„
#+begin_src emacs-lisp
  (add-to-list 'load-path "~/.emacs.d/lisp/")
  (add-to-list 'load-path "~/.emacs.d/site-lisp/")
#+end_src

** é•œåƒè®¾ç½®
#+begin_src emacs-lisp
  (setq package-archives '(("gnu-mirror"   . "https://mirrors.tuna.tsinghua.edu.cn/elpa/gnu/")
			   ("melpa-mirror"  . "https://mirrors.tuna.tsinghua.edu.cn/elpa/melpa/")
			   ("nongnu-mirror" . "https://mirrors.tuna.tsinghua.edu.cn/elpa/nongnu/" )
			   ("org-mirror" . "https://mirrors.tuna.tsinghua.edu.cn/elpa/org/")
			   ))
#+end_src

** é…ç½®å¯¼å…¥
*** å˜é‡
#+begin_src emacs-lisp
  ;; custom file
  (setq custom-file "~/.emacs.d/custom.el")
  (load custom-file)
#+end_src
*** å¸¸è§„
#+begin_src emacs-lisp
  ;; ibufferé…ç½®
  (require 'init-ibuffer)

  ;; emacsè‡ªå¸¦é»˜è®¤æ¨¡å¼è®¾ç½®
  (require 'default-set)

#+end_src
*** è¾“å…¥æ³•
#+begin_src emacs-lisp
  (require 'init-rime)
#+end_src
*** æ¨¡å¼
#+begin_src emacs-lisp
  ;; org-mode
  (require 'init-org)

  ;; markdown-mode
  (require 'init-markdown)

  ;; rust
  (require 'init-rust)

  ;; flycheck
  (require 'init-flycheck)
#+end_src
*** åŠŸèƒ½
#+begin_src emacs-lisp
  ;; embark
  (require 'init-embark)
  ;; company
  (require 'init-company)
#+end_src
*** git
#+begin_src emacs-lisp
  (require 'init-git)
#+end_src
*** å¤–è§‚
#+begin_src emacs-lisp
  ;; ä¸»é¢˜è®¾ç½®
  (require 'init-theme)
#+end_src
** provide
#+begin_src emacs-lisp
  (provide 'init)
#+end_src
* custom.el
:PROPERTIES:
:HEADER-ARGS: :tangle custom.el :mkdirp yes
:END:

ç”¨æˆ·å˜é‡ä¿å­˜å¤„

** rustic
#+begin_src emacs-lisp
  ;; rust-analyzerä½ç½®
  (setq rustic-analyzer-command '("~/.cargo/bin/rust-analyzer"))
  ;; lsp-client
  (setq rustic-lsp-client 'eglot)
#+end_src

** rime
#+begin_src emacs-lisp
  ;; ç”¨æˆ·æ•°æ®ç›®å½•
  (setq rime-user-data-dir "~/emacs.d/rime-data")
  ;; å…±äº«ç›®å½•
  (setq rime-share-data-dir "~/.config/fctix/rime-data")
#+end_src
* lisp
** é€šç”¨é…ç½®
*** default-set.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/default-set.el :mkdirp yes
:END:

åŸºæœ¬çš„é…ç½®
**** bind
#+begin_src emacs-lisp
  ;; set-mark-command bind
  (global-set-key (kbd "C-c r") 'set-mark-command)
#+end_src
**** ä¹ æƒ¯æ›´æ”¹
#+begin_src emacs-lisp
  ;; è‡ªåŠ¨æ›¿æ¢é€‰æ‹©åŒºå†…å®¹
  (delete-selection-mode 1)
#+end_src
**** åŠŸèƒ½æ›´æ”¹
#+begin_src emacs-lisp
  ;; è‡ªåŠ¨è¡¥å…¨æ‹¬å·
  (electric-pair-mode 1)

  ;; å…³é—­æç¤ºéŸ³
  (setq ring-bell-function 'ignore)

  ;; æ˜¾ç¤ºè¡Œå·
  (global-display-line-numbers-mode 'open)
  (column-number-mode 1)

  ;; å…³é—­è‡ªåŠ¨å¤‡ä»½~æ–‡ä»¶
  (setq make-backup-files nil)
  (setq auto-save-default nil)


#+end_src
**** provide
#+begin_src emacs-lisp
  (provide 'default-set)
#+end_src
*** init-ibuffer.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-ibuffer.el :mkdirp yes
:END:
**** bind
#+begin_src emacs-lisp
  (global-unset-key (kbd "C-x C-b"))
  (global-set-key (kbd "C-x C-b") 'ibuffer)
#+end_src
**** é…ç½®
#+begin_src emacs-lisp
  ;; ä¸æ˜¾ç¤ºç©ºç»„
  (setq ibuffer-show-empty-filter-groups nil)
#+end_src
**** ibufferä¸»ä½“
#+begin_src emacs-lisp
  (setq ibuffer-saved-filter-groups
      '(("ibuffer"
	 ("rust"
	  (used-mode . rust-mode))
	 ("org_note"
	  (used-mode . org-mode))
	 ("typst"
	  (used-mode . typst--markup-mode))
	 ("elisp"
	  (used-mode . emacs-lisp-mode))
	 ("haskell"
	  (used-mode . haskell-mode))
	 ("matrix"
	  (name . "Ement*"))
	 ("irc query"
	  (used-mode . circe-query-mode))
	 ("dired"
	  (used-mode . dired-mode))
	 ("conf"
	  (used-mode . conf-unix-mode))
	 ("toml"
	  (used-mode . conf-toml-mode))
	 ("markdown"
	  (used-mode . markdown-mode))
	 ("docker-compose"
	  (name . "docker-compose"))
	 ("message"
	  (used-mode . messages-buffer-mode))
	 ("magit"
	  (name . "magit*"))
	 ("special"
	  (used-mode . special-mode))
	 ("irc"
	  (used-mode . circe-channel-mode)))))
#+end_src
**** provide
#+begin_src emacs-lisp
  (provide 'init-ibuffer)
#+end_src
** æ¨¡å¼é…ç½®
*** init-company.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-company.el :mkdirp yes
:END:
~company~ è‡ªåŠ¨è¡¥å…¨
**** companyä¸»ä½“
#+begin_src emacs-lisp
  (use-package company
    :ensure t
    :init (global-company-mode)
    :config
    (setq company-minimum-prefix-length 1) ;;ä¸€ä¸ªå­—å¼€å§‹è¡¥å…¨
    (setq company-show-quick-access t)
    (setq company-show-numbers t) ;;æ˜¾ç¤ºé€‰é¡¹ç¼–å·
    )
#+end_src
**** companyæ‹“å±•
***** nginx
#+begin_src emacs-lisp
  (use-package company-nginx
    :ensure t
  )
#+end_src
**** provide
#+begin_src emacs-lisp
  (provide 'init-company)
#+end_src
*** init-markdown.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-markdown.el :mkdirp yes
:END:
markdown

**** markdownä¸»ä½“
#+begin_src emacs-lisp
  (use-package markdown-mode
    :ensure t)
#+end_src

**** provide
#+begin_src emacs-lisp
  (provide 'init-markdown)
#+end_src
*** init-org.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-org.el :mkdirp yes
:END:
*org-mode*

**** orgä¸»ä½“
#+begin_src emacs-lisp
    (use-package org
    :ensure nil
    :mode ("\\.org\\'" . org-mode)
    :hook ((org-mode . visual-line-mode)
		   (org-mode . my/org-prettify-symbols))
    :commands (org-find-exact-headline-in-buffer org-set-tags)
    :custom-face
    ;; è®¾ç½®Org modeæ ‡é¢˜ä»¥åŠæ¯çº§æ ‡é¢˜è¡Œçš„å¤§å°
    (org-document-title ((t (:height 1.75 :weight bold))))
    (org-level-1 ((t (:height 1.2 :weight bold))))
    (org-level-2 ((t (:height 1.15 :weight bold))))
    (org-level-3 ((t (:height 1.1 :weight bold))))
    (org-level-4 ((t (:height 1.05 :weight bold))))
    (org-level-5 ((t (:height 1.0 :weight bold))))
    (org-level-6 ((t (:height 1.0 :weight bold))))
    (org-level-7 ((t (:height 1.0 :weight bold))))
    (org-level-8 ((t (:height 1.0 :weight bold))))
    (org-level-9 ((t (:height 1.0 :weight bold))))
    ;; è®¾ç½®ä»£ç å—ç”¨ä¸Šä¸‹è¾¹çº¿åŒ…è£¹
    (org-block-begin-line ((t (:underline t :background unspecified))))
    (org-block-end-line ((t (:overline t :underline nil :background unspecified))))
    :config
    ;; ================================
    ;; åœ¨org modeé‡Œç¾åŒ–å­—ç¬¦ä¸²
    ;; ================================
    (defun my/org-prettify-symbols ()
	  (setq prettify-symbols-alist
		    (mapcan (lambda (x) (list x (cons (upcase (car x)) (cdr x))))
				    '(
					  ;; ("[ ]"              . 9744)         ; â˜
					  ;; ("[X]"              . 9745)         ; â˜‘
					  ;; ("[-]"              . 8863)         ; âŠŸ
					  ("#+begin_src"      . 9998)         ; âœ
					  ("#+end_src"        . 9633)         ; â–¡
					  ("#+begin_example"  . 129083)       ; ğŸ »
					  ("#+end_example"    . 129081)       ; ğŸ ¹
					  ("#+results:"       . 9776)         ; â˜°
					  ;; ("#+attr_latex:"    . "ğŸ„›")
					  ;; ("#+attr_html:"     . "ğŸ„—")
					  ;; ("#+attr_org:"      . "ğŸ„")
					  ;; ("#+name:"          . "ğŸ„")         ; 127261
					  ;; ("#+caption:"       . "ğŸ„’")
					  ; 127250
					  ("#+date:"          . "ğŸ“…")         ; 128197
					  ("#+author:"        . "ğŸ’")         ; 128100
					  ("#+setupfile:"     . 128221)       ; ğŸ“
					  ("#+email:"         . 128231)       ; ğŸ“§
					  ("#+startup:"       . 10034)        ; âœ²
					  ("#+options:"       . 9965)         ; â›­
					  ("#+title:"         . 10162)        ; â²
					  ("#+subtitle:"      . 11146)        ; â®Š
					  ("#+downloaded:"    . 8650)         ; â‡Š
					  ("#+language:"      . 128441)       ; ğŸ–¹
					  ("#+begin_quote"    . 187)          ; Â»
					  ("#+end_quote"      . 171)          ; Â«
		      ("#+begin_results"  . 8943)         ; â‹¯
		      ("#+end_results"    . 8943)         ; â‹¯
					  )))
      (setq prettify-symbols-unprettify-at-point t)
	  (prettify-symbols-mode 1))

    ;; æå‡latexé¢„è§ˆçš„å›¾ç‰‡æ¸…æ™°åº¦
    (plist-put org-format-latex-options :scale 1.8)

    ;; è®¾ç½®æ ‡é¢˜è¡Œä¹‹é—´æ€»æ˜¯æœ‰ç©ºæ ¼ï¼›åˆ—è¡¨ä¹‹é—´æ ¹æ®æƒ…å†µè‡ªåŠ¨åŠ ç©ºæ ¼
    (setq org-blank-before-new-entry '((heading . t)
									   (plain-list-item . auto)
    :custom
    ;; å¯ç”¨ä¸€äº›å­æ¨¡å—
    (org-modules '(ol-bibtex ol-gnus ol-info ol-eww org-habit org-protocol))
    ;; åœ¨æŒ‰M-RETæ—¶ï¼Œæ˜¯å¦æ ¹æ®å…‰æ ‡æ‰€åœ¨çš„ä½ç½®åˆ†è¡Œï¼Œè¿™é‡Œè®¾ç½®ä¸ºæ˜¯
    ;; (org-M-RET-may-split-line '((default . nil)))
    ;; ä¸€äº›Org modeè‡ªå¸¦çš„ç¾åŒ–è®¾ç½®
    ;; æ ‡é¢˜è¡Œç¾åŒ–
    (org-fontify-whole-heading-line t)
    ;; è®¾ç½®æ ‡é¢˜è¡ŒæŠ˜å ç¬¦å·
    (org-ellipsis " â–¾")
    ;; åœ¨æ´»åŠ¨åŒºåŸŸå†…çš„æ‰€æœ‰æ ‡é¢˜æ æ‰§è¡ŒæŸäº›å‘½ä»¤
    (org-loop-over-headlines-in-active-region t)
    ;; TODOæ ‡ç­¾ç¾åŒ–
    (org-fontify-todo-headline t)
    ;; DONEæ ‡ç­¾ç¾åŒ–
    (org-fontify-done-headline t)
    ;; å¼•ç”¨å—ç¾åŒ–
    (org-fontify-quote-and-verse-blocks t)
    ;; éšè—å®æ ‡è®°
    (org-hide-macro-markers t)
    ;; éšè—å¼ºè°ƒæ ‡ç­¾
    (org-hide-emphasis-markers t)
    ;; é«˜äº®latexè¯­æ³•
    (org-highlight-latex-and-related '(native script entities))
    ;; ä»¥UTF-8æ˜¾ç¤º
    (org-pretty-entities t)
    ;; æ˜¯å¦éšè—æ ‡é¢˜æ çš„å‰ç½®æ˜Ÿå·ï¼Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡org-modernæ¥éšè—
    ;; (org-hide-leading-stars t)
    ;; å½“å¯ç”¨ç¼©è¿›æ¨¡å¼æ—¶è‡ªåŠ¨éšè—å‰ç½®æ˜Ÿå·
    (org-indent-mode-turns-on-hiding-stars t)
    ;; è‡ªåŠ¨å¯ç”¨ç¼©è¿›
    (org-startup-indented nil)
    ;; æ ¹æ®æ ‡é¢˜æ è‡ªåŠ¨ç¼©è¿›æ–‡æœ¬
    (org-adapt-indentation nil)
    ;; è‡ªåŠ¨æ˜¾ç¤ºå›¾ç‰‡
    (org-startup-with-inline-images t)
    ;; é»˜è®¤ä»¥Overviewçš„æ¨¡å¼å±•ç¤ºæ ‡é¢˜è¡Œ
    (org-startup-folded 'overview)
    ;; å…è®¸å­—æ¯åˆ—è¡¨
    (org-list-allow-alphabetical t)
    ;; åˆ—è¡¨çš„ä¸‹ä¸€çº§è®¾ç½®
    (org-list-demote-modify-bullet '(
								     ("-"  . "+")
				     ("+"  . "1.")
								     ("1." . "a.")
								     ))
    ;; ç¼–è¾‘æ—¶æ£€æŸ¥æ˜¯å¦åœ¨æŠ˜å çš„ä¸å¯è§åŒºåŸŸ
    (org-fold-catch-invisible-edits 'smart)
    ;; åœ¨å½“å‰ä½ç½®æ’å…¥æ–°æ ‡é¢˜è¡Œè¿˜æ˜¯åœ¨å½“å‰æ ‡é¢˜è¡Œåæ’å…¥ï¼Œè¿™é‡Œè®¾ç½®ä¸ºå½“å‰ä½ç½®
    (org-insert-heading-respect-content nil)
    ;; è®¾ç½®å›¾ç‰‡çš„æœ€å¤§å®½åº¦ï¼Œå¦‚æœæœ‰imagemagickæ”¯æŒå°†ä¼šæ”¹å˜å›¾ç‰‡å®é™…å®½åº¦
    ;; å››ç§è®¾ç½®æ–¹æ³•ï¼š(1080), 1080, t, nil
    (org-image-actual-width nil)
    ;; imenuçš„æœ€å¤§æ·±åº¦ï¼Œé»˜è®¤ä¸º2
    (org-imenu-depth 4)
    ;; å›è½¦è¦ä¸è¦è§¦å‘é“¾æ¥ï¼Œè¿™é‡Œè®¾ç½®ä¸è§¦å‘
    (org-return-follows-link nil)
    ;; ä¸Šæ ‡^ä¸‹æ ‡_æ˜¯å¦éœ€è¦ç‰¹æ®Šå­—ç¬¦åŒ…è£¹ï¼Œè¿™é‡Œè®¾ç½®éœ€è¦ç”¨å¤§æ‹¬å·åŒ…è£¹
    (org-use-sub-superscripts '{})
    ;; å¤åˆ¶ç²˜è´´æ ‡é¢˜è¡Œçš„æ—¶å€™åˆ é™¤id
    (org-clone-delete-id t)
    ;; ç²˜è´´æ—¶è°ƒæ•´æ ‡é¢˜è¡Œçš„çº§åˆ«
    (org-yank-adjusted-subtrees t)

    ;; TOODçš„å…³é”®è¯è®¾ç½®ï¼Œå¯ä»¥è®¾ç½®ä¸åŒçš„ç»„
    (org-todo-keywords '((sequence "TODO(t)" "HOLD(h!)" "WIP(i!)" "WAIT(w!)" "|" "DONE(d!)" "CANCELLED(c@/!)")
					     (sequence "REPORT(r)" "BUG(b)" "KNOWNCAUSE(k)" "|" "FIXED(f!)")))
    ;; TODOå…³é”®è¯çš„æ ·å¼è®¾ç½®
    (org-todo-keyword-faces '(("TODO"       :foreground "#7c7c75" :weight bold)
							  ("HOLD"       :foreground "#feb24c" :weight bold)
							  ("WIP"        :foreground "#0098dd" :weight bold)
							  ("WAIT"       :foreground "#9f7efe" :weight bold)
							  ("DONE"       :foreground "#50a14f" :weight bold)
							  ("CANCELLED"  :foreground "#ff6480" :weight bold)
							  ("REPORT"     :foreground "magenta" :weight bold)
							  ("BUG"        :foreground "red"     :weight bold)
							  ("KNOWNCAUSE" :foreground "yellow"  :weight bold)
							  ("FIXED"      :foreground "green"   :weight bold)))
    ;; å½“æ ‡é¢˜è¡ŒçŠ¶æ€å˜åŒ–æ—¶æ ‡ç­¾åŒæ­¥å‘ç”Ÿçš„å˜åŒ–
    ;; Moving a task to CANCELLED adds a CANCELLED tag
    ;; Moving a task to WAIT adds a WAIT tag
    ;; Moving a task to HOLD adds WAIT and HOLD tags
    ;; Moving a task to a done state removes WAIT and HOLD tags
    ;; Moving a task to TODO removes WAIT, CANCELLED, and HOLD tags
    ;; Moving a task to DONE removes WAIT, CANCELLED, and HOLD tags
    (org-todo-state-tags-triggers
     (quote (("CANCELLED" ("CANCELLED" . t))
		     ("WAIT" ("WAIT" . t))
		     ("HOLD" ("WAIT") ("HOLD" . t))
		     (done ("WAIT") ("HOLD"))
		     ("TODO" ("WAIT") ("CANCELLED") ("HOLD"))
		     ("DONE" ("WAIT") ("CANCELLED") ("HOLD")))))
    ;; ä½¿ç”¨ä¸“å®¶æ¨¡å¼é€‰æ‹©æ ‡é¢˜æ çŠ¶æ€
    (org-use-fast-todo-selection 'expert)
    ;; çˆ¶å­æ ‡é¢˜æ çŠ¶æ€æœ‰ä¾èµ–
    (org-enforce-todo-dependencies t)
    ;; æ ‡é¢˜æ å’Œä»»åŠ¡å¤é€‰æ¡†æœ‰ä¾èµ–
    (org-enforce-todo-checkbox-dependencies t)
    ;; ä¼˜å…ˆçº§æ ·å¼è®¾ç½®
    (org-priority-faces '((?A :foreground "red")
						  (?B :foreground "orange")
						  (?C :foreground "yellow")))
    ;; æ ‡é¢˜è¡Œå…¨å±€å±æ€§è®¾ç½®
    (org-global-properties '(("EFFORT_ALL" . "0:15 0:30 0:45 1:00 2:00 3:00 4:00 5:00 6:00 7:00 8:00")
						     ("APPT_WARNTIME_ALL" . "0 5 10 15 20 25 30 45 60")
						     ("RISK_ALL" . "Low Medium High")
						     ("STYLE_ALL" . "habit")))
    ;; Org columnsçš„é»˜è®¤æ ¼å¼
    (org-columns-default-format "%25ITEM %TODO %SCHEDULED %DEADLINE %3PRIORITY %TAGS %CLOCKSUM %EFFORT{:}")
    ;; å½“çŠ¶æ€ä»DONEæ”¹æˆå…¶ä»–çŠ¶æ€æ—¶ï¼Œç§»é™¤ CLOSED: [timestamp]
    (org-closed-keep-when-no-todo t)
    ;; DONEæ—¶åŠ ä¸Šæ—¶é—´æˆ³
    (org-log-done 'time)
    ;; é‡å¤æ‰§è¡Œæ—¶åŠ ä¸Šæ—¶é—´æˆ³
    (org-log-repeat 'time)
    ;; Deadlineä¿®æ”¹æ—¶åŠ ä¸Šä¸€æ¡è®°å½•
    (org-log-redeadline 'note)
    ;; Scheduleä¿®æ”¹æ—¶åŠ ä¸Šä¸€æ¡è®°å½•
    (org-log-reschedule 'note)
    ;; ä»¥æŠ½å±‰çš„æ–¹å¼è®°å½•
    (org-log-into-drawer t)
    ;; ç´§æ¥ç€æ ‡é¢˜è¡Œæˆ–è€…è®¡åˆ’/æˆªæ­¢æ—¶é—´æˆ³ååŠ ä¸Šè®°å½•æŠ½å±‰
    (org-log-state-notes-insert-after-drawers nil)

    ;; refileä½¿ç”¨ç¼“å­˜
    (org-refile-use-cache t)
    ;; refileçš„ç›®çš„åœ°ï¼Œè¿™é‡Œè®¾ç½®çš„æ˜¯agendaæ–‡ä»¶çš„æ‰€æœ‰æ ‡é¢˜
    (org-refile-targets '((org-agenda-files . (:maxlevel . 9))))
    ;; å°†æ–‡ä»¶ååŠ å…¥åˆ°è·¯å¾„
    (org-refile-use-outline-path 'file)
    ;; æ˜¯å¦æŒ‰æ­¥éª¤refile
    (org-outline-path-complete-in-steps nil)
    ;; å…è®¸åˆ›å»ºæ–°çš„æ ‡é¢˜è¡Œï¼Œä½†éœ€è¦ç¡®è®¤
    (org-refile-allow-creating-parent-nodes 'confirm)

    ;; è®¾ç½®æ ‡ç­¾çš„é»˜è®¤ä½ç½®ï¼Œé»˜è®¤æ˜¯ç¬¬77åˆ—å³å¯¹é½
    ;; (org-tags-column -77)
    ;; è‡ªåŠ¨å¯¹é½æ ‡ç­¾
    (org-auto-align-tags t)
    ;; æ ‡ç­¾ä¸ç»§æ‰¿
    (org-use-tag-inheritance nil)
    ;; åœ¨æ—¥ç¨‹è§†å›¾çš„æ ‡ç­¾ä¸ç»§æ‰¿
    (org-agenda-use-tag-inheritance nil)
    ;; æ ‡ç­¾å¿«é€Ÿé€‰æ‹©
    (org-use-fast-tag-selection t)
    ;; æ ‡ç­¾é€‰æ‹©ä¸éœ€è¦å›è½¦ç¡®è®¤
    (org-fast-tag-selection-single-key t)
    ;; å®šä¹‰äº†æœ‰åºå±æ€§çš„æ ‡é¢˜è¡Œä¹ŸåŠ ä¸Š OREDERD æ ‡ç­¾
    (org-track-ordered-property-with-tag t)
    ;; å§‹ç»ˆå­˜åœ¨çš„çš„æ ‡ç­¾
    (org-tag-persistent-alist '(("read"     . ?r)
							    ("mail"     . ?m)
							    ("emacs"    . ?e)
							    ("study"    . ?s)
							    ("work"     . ?w)))
    ;; é¢„å®šä¹‰å¥½çš„æ ‡ç­¾
    (org-tag-alist '((:startgroup)
				     ("crypt"    . ?c)
				     ("linux"    . ?l)
				     ("apple"    . ?a)
				     ("noexport" . ?n)
				     ("ignore"   . ?i)
				     ("TOC"      . ?t)
				     (:endgroup)))

    ;; å½’æ¡£è®¾ç½®
    (org-archive-location "%s_archive::datetree/")
    )))
#+end_src
**** org-contrib
#+begin_src emacs-lisp
  ;; Org modeçš„é™„åŠ åŒ…ï¼Œæœ‰è¯¸å¤šé™„åŠ åŠŸèƒ½
  (use-package org-contrib
    :ensure t)
#+end_src
**** insert
#+begin_src emacs-lisp
  (global-set-key (kbd "M-o") 'org-insert-structure-template)
#+end_src
**** src
#+begin_src emacs-lisp
  ;; ä»£ç å—é«˜äº®
  (setq org-src-fontify-natively t)
#+end_src
**** provide
#+begin_src emacs-lisp
  (provide 'init-org)
#+end_src
*** init-polymode.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-polymode.el :mkdirp yes
:END:
poly
**** ä¸»ä½“
#+begin_src emacs-lisp
  (use-package polymode
    :ensure t)
#+end_src
**** provide
#+begin_src emacs-lisp
  (provide 'init-polymode)
#+end_src
*** init-rust.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-rust.el :mkdirp yes
:END:
rust
**** rustic
#+begin_src emacs-lisp
  (use-package rustic
  :ensure
  :bind (:map rustic-mod-map
      ("C-c C-c l" . flycheck-list-errors)))
#+end_src
**** provide
#+begin_src emacs-lisp
  (provide 'init-rust)
#+end_src
*** init-flycheck.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-flycheck.el :mkdirp yes
:END:
**** flycheck
#+begin_src emacs-lisp
  (use-package flycheck
    :ensure t
    :config
    (setq truncate-lines nil) ;è‡ªåŠ¨æ¢è¡Œ
    :init (global-flycheck-mode)
    )
#+end_src
**** flycheck-rust
#+begin_src emacs-lisp
  (use-package flycheck-rust
  :ensure t
  )
#+end_src
**** provide
#+begin_src emacs-lisp
  (provide 'init-flycheck)
#+end_src
** è¾“å…¥æ³•
*** init-rime.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-rime.el :mkdirp yes
:END:
rimeè¾“å…¥æ³• è¾“å…¥æ³•åœ¨rimeåˆ†æ”¯
**** popup
#+begin_src emacs-lisp
  ;; popup
  (use-package popup
    :ensure t
    )
#+end_src

**** rimeä¸»ä½“
#+begin_src emacs-lisp
  (use-package rime
  :ensure t
  :custom
  (default-input-method "rime")
  (rime-show-candidate 'popup)
  )
#+end_src
**** provide
#+begin_src emacs-lisp
  (provide 'init-rime)
#+end_src
** çª—å£é…ç½®
*** init-ace-window.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-ace-window.el :mkdirp yes
:END:
çª—å£ç¼–å·
**** ace-windowä¸»ä½“
#+begin_src emacs-lisp
  (use-package ace-window
  :ensure t
  :bind
  ("C-x o" . ace-window)
  )
#+end_src

**** provide
#+begin_src emacs-lisp
  (provide 'init-ace-window)
#+end_src
** åŠŸèƒ½é…ç½®
*** init-embark.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-embark.el :mkdirp yes
:END:
~embark~
**** embarkä¸»ä½“
#+begin_src emacs-lisp
(use-package marginalia
  :ensure t
  :config
  (marginalia-mode))

(use-package embark
  :ensure t

  :bind
  (("C-." . embark-act)         ;; pick some comfortable binding
   ("C-;" . embark-dwim)        ;; good alternative: M-.
   ("C-h B" . embark-bindings)) ;; alternative for `describe-bindings'

  :init

  ;; Optionally replace the key help with a completing-read interface
;;  (setq prefix-help-command #'embark-prefix-help-command)

  ;; Show the Embark target at point via Eldoc. You may adjust the
  ;; Eldoc strategy, if you want to see the documentation from
  ;; multiple providers. Beware that using this can be a little
  ;; jarring since the message shown in the minibuffer can be more
  ;; than one line, causing the modeline to move up and down:

  ;; (add-hook 'eldoc-documentation-functions #'embark-eldoc-first-target)
  ;; (setq eldoc-documentation-strategy #'eldoc-documentation-compose-eagerly)

  :config

  ;; Hide the mode line of the Embark live/completions buffers
  (add-to-list 'display-buffer-alist
               '("\\`\\*Embark Collect \\(Live\\|Completions\\)\\*"
                 nil
                 (window-parameters (mode-line-format . none)))))


#+end_src
**** provide
#+begin_src emacs-lisp
  (provide 'init-embark)
#+end_src
** gité…ç½®
*** init-git.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-git.el :mkdirp yes
:END:
~git~
**** magit
#+begin_src emacs-lisp
  (use-package magit
    :ensure t)
#+end_src
**** git-gutter
#+begin_src emacs-lisp
  (use-package git-gutter
    :ensure t
    :config (global-git-gutter-mode +1))
#+end_src
**** balmer
#+begin_src emacs-lisp
  (use-package blamer
  :ensure t
  :defer 20
  :custom
  (blamer-idle-time 1) ; å»¶è¿Ÿæ—¶é—´
  (blamer-min-offset 70)
  :custom-face
  (blamer-face ((t :foreground "#7a88cf"
		    :background nil
		    :height 100
		    :italic t)))
  :config
  (global-blamer-mode 1))
#+end_src
**** provide
#+begin_src emacs-lisp
  (provide 'init-git)
#+end_src
** å¤–è§‚
*** init-theme.el
:PROPERTIES:
:HEADER-ARGS: :tangle lisp/init-theme.el :mkdirp yes
:END:
ä¸»é¢˜è®¾ç½®
**** kaolin-themes
#+begin_src emacs-lisp
  (use-package kaolin-themes
    :ensure t
    :config
    (load-theme 'kaolin-dark t)
    (kaolin-treemacs-theme))
#+end_src
**** provide
#+begin_src emacs-lisp
  (provide 'init-theme)
#+end_src

